# 面试相关连接 

https://www.cnblogs.com/wpgraceii/p/10528183.html
https://segmentfault.com/a/1190000038922260
https://www.jishuchi.com/read/go-interview/3435
http://wearygods.online/articles/2021/04/19/1618823886966.html
https://github.com/lifei6671/interview-go
https://www.zhihu.com/question/60952598
https://blog.csdn.net/itcastcpp/article/details/80462619
https://blog.csdn.net/fish_study_csdn/article/details/119756372
https://blog.csdn.net/gezhonglei2007/article/details/52237582

## 高频题目

### 语言篇

1. Golang中除了加Mutex锁以外还有哪些方式安全读写共享变量？
除了加mutex锁还可以添加channel安全的读写共享变量

2. 无缓冲 Chan 的发送和接收是否同步?
ch:=make(chan int) 无缓冲的channel由于没有缓冲所以接收和发送需要同步
ch:make(chan int,2)不要求发送和接收同步，有缓冲的channel由于有缓冲在缓冲区没有满的时候不会发生阻塞

3. 简述 G M P 
g代表一个协程 每个g中都保存着这个协程的上下文信息
m代表一个内核线程
p代表处理器，
g必须调度到m上才能运行，m想要运行g，必须获取p，p里面包含了一个可运行g的本地队列
存的数量有限，一般不超过256个，新建的g会优先放到本地队列，如果本地队列放满了，会把一半的g放到全局队列，p的队列为空时，m会尝试从全局队列拿一批g放到本地队列，或者从其他的p的本地队列拿一半到自己p的本地队列，g执行完之后，m会从p获取下一个g，不断地重复下去
p的数量由环境变量或者runtime的方法gomaxprocs决定，
m的数量可以通过setMaxThreads函数设置
如果一个m阻塞了，p就会去创建或者切换到另外一个m，即使p默认数量为1，也可能创建很多个m出来，因为g的切换在用户态进行，所以开销比较小Go 调度本质是把大量的 goroutine 分配到少量线程上去执行，并利用多核并行，实现更强大的并发

4. JSON 标准库对 nil slice 和 空 slice 的处理是一致的吗？
不一致，nil的slice序列化为nill
空的slice序列化后是一个空的列表

5. 协程，线程，进程的区别
进程，就是一个运行的程序，是系统进行资源分配和调度的一个独立单位，有独立的内存空间，所以进程间的数据不共享，开销大
线程是进程的一个执行实例，是程序执行的最小单元，一个进程至少有一个线程，多个线程共享内存，所以提高了运行效率
协程是一种用户态的轻量级线程，协程的调度完全由用户控制，协程拥有自己的寄存器上下文和栈，协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，所以在调度的时候没有内核切换的开销

6. 互斥锁，读写锁，死锁问题是怎么解决
互斥锁就是对一个需要进行操作的共享区域加锁，要获取数据，必须先获得锁，在执行完之后释放锁
读写锁，可以让多个读操作并发执行，同时读取，在进行写操作的时候，完全互斥
线程试图对一个互斥量加锁两次，此线程就会陷入死锁
两个线程都需要获得对方已经加锁的互斥量才能继续运行，那么这两个线程互相阻塞，形成锁
解决办法，在设置互斥量的时候判断程序获得锁之后能不能在执行之后解锁
1，当某个互斥量只需要需要很短时间，如果长时间占用，资源利用率很低，可以对这个资源单独加锁，使用完之后释放该资源
2.当获得的资源数据不满足不能继续运行的时候，释放掉资源，让其他线程获取
3，系统给线程编号，按照一定的顺序申请资源

7. 什么是三色标记法
白色，默认值。本次回收没被扫描过的对象都是白色的。确认不可达的对象也是白色，但是会被标记「不可达」。
灰色，中间状态。本对象有被外部引用，但是本对象引用的其它对象尚未全部检测完。
黑色，本对象有被其它对象引用，且已检测完本对象引用的其它对象。
最终将白色状态的对象回收掉。为了解决其中会存在的漏标、多标问题，它通过「混合写屏障」的机制来解决。思路是，
将对象分为堆上的对象和栈上的对象。
GC 开始将栈上的对象全部扫描并标记为黑色，无需 STW。并且之后不再进行第二次重复扫描
在 GC 期间，任何在栈上创建的新对象，均为黑色。
在 GC 期间，在堆上被删除或者添加的对象都标记为灰色。后续继续扫描。
8. 什么是? data Race问题怎么解决？能不能不加锁解决这个问题？
data race是数据竞争，两个协程同时运行一个程序，a协程需要b协程的值，但是不知道a协程运行完之后是否已经获取了b的值，这样可能每次运行就会出现不同的值。
go里面有一个数据竞争检测器我们可以通过go run -raca main.go来检测发生数据竞争地信息
我们可以通过加锁的方式解决这个问题，在写数据的位置加锁，保证读到的数据是已经写入的数据
9. 什么是channel，为什么它可以做到线程安全？
channel是go中的一个核心类型，可以把他理解为一个管道，可以用它在两个协程间进行数据的传递
channel不管发送还是接收一个channel中的数据，都是原子性的，channel底层实现出队入队时也加了锁，所以channel是线程安全的

10. 怎么查看Goroutine的数量?
可以通过runtime.numGoroutine
11. map是并发安全的吗？怎么解决并发安全问题？
map不是并发安全的
可以通过加锁或者sync.map来解决
12. go struct能不能比较
同一个struct的两个实例如果是相同的类型并且成员变量中没有map slice function可以直接比较，如果有的话需要借助reflect.deepEqual 反射函数来比较
两个不同的结构体可以通过强制类型转换来比较
13. 主协程如何等其余协程完再操作?
可以通过channel,设置一个变量表示有多少个协程
在设置一个channel用于和主协程通讯，没一个执行完就想ch中写一个数据，通过遍历channel获得数据，将协程数减一，当协程数为0，关闭channel，主协程退出遍历 程序结束
还可以通过sync.waitGroup来实现
他的内部有3个方法 add done wait
每执行一个协程用add加1 执行完之后通过done-1，当为0时wait停止阻塞
14. slice，len，cap，共享，扩容.
slice是go中的一个数据类型，与数组相比切片的长度是不固定的
len表示切片的长度 cap表示切面的容量
数组非常高效，可以直接寻址，但是有个缺陷，难以扩容，所以slice被设计为指向数组的指针，在需要扩容的时候，会将底层数组上的值复制到一个新的地址上然后指向这个新数组，所以slice有个特性，允许，多个slice指向同一个数组，不需要重新拷贝数据，提高效率，
slice通过append添加数据，如果添加的数据已经满了就会创建一个新的切片，当原容量小于1024的时候，新slice容量变成原来的两倍，如果增加的数据的容量大于原来容量的两倍直接使用新容量，大于1024后，容量每次扩大1.25倍左右

15. map如何顺序读取?
创建一个切片，获取map中所有的key添加到切片，在对切片排序，通过遍历切片获取map中的值
16. 什么是结构体tag，怎么用?
tag是go语言提供的可以通过发射发现的结构体标签，在json中得到广泛使用，是键值队的形式，结构体标签是在编译阶段就和成员进行关联的，通过字符串关联，在运行阶段可以通过反射读出来
我们有时候需要自定义一些标签，但是一些库没有支持自定义的标签，写的标签是没有任何意义的，就需要我们提供解析方法。
17. slice深拷贝和浅拷贝
浅拷贝
目的切片和源切片指向同一个底层数组，任何一个数组元素改变，都会同时影响两个数组。
深拷贝
目的切片和源切片指向不同的底层数组，任何一个数组元素改变都不影响另外一个
18. map触发扩容的时机，满足什么条件时扩容？
map中的数据总个数/桶个数>6.5的时候引发翻倍扩容
19. make和new什么区别?
go语言中make和new是两个内置函数，主要用于创建并分配类型的内存
new只分配内存，而make只能用于slice，map和channel的初始化
new分配返回的是指针*type，make返回引用
new分配的空间被清零，make分配空间后会进行初始化
20. pprof怎么使用？什么是火焰图?

21. 数组与切片的区别?

22. beego和gin的区别?为什么gin比beego要快?

23. 讲一下defer的原理

24. 什么事cas？Go中CAS是怎么回事？

25. Go值接收者和指针接收者的区别？

26. Goroutine发生了泄漏如何检测？

27. 为何GPM调度要有P?

28. 什么是闭包？什么是闭包的延迟加载?

### 中间件篇

1. Redis的数据结构有哪些，以及实现场景?

2. Mysql高可用方案有哪些?

3. mysql和redis区别是什么？

4. mysql事物的特性？事物的隔离级别？

5. redis集群有几种模式？

6. 什么是聚簇索引，非聚簇索引？

7. 索引的数据结构是什么？b树和b+树的区别是什么?

8. mysql的数据引擎有哪些？有什么区别？

9. mongodb的优点和缺点？

10. redis单线程为什么还有这么高的性能？

### 技术原理篇

1. 负载均衡原理是什么?

2. 什么是微服务?

3. 分布式锁实现原理，用过吗？

4. 说一下异步和非阻塞的区别?

5. http状态吗简介

6. 基本排序，哪些是稳定的

7. tcp和udp的区别？简述tcp三次握手和四次挥手

8. 乐观缩和悲观锁是什么？怎么实现？

### 操作系统篇

1. linux命令，查看端口占用，cpu负载，内存占用，如何发送信号给一个进程

2. 开多个线程和开多个协程会有什么区别

### 基础工具篇

1. git文件版本，使用顺序，merge跟rebase

## 加分题目

### 语言篇

1. Epoll原理, epoll select poll 的区别与联系

2. Golang GC 时会发生什么?

3. Golang 里的逃逸分析是什么？怎么避免内存逃逸？

4. Golang 的GC触发时机是什么?

5. 设置了GOMAXPROC=1的时候，在1.13和1.14的区别？什么是抢占式调度?

6. 什么是写屏障、混合写屏障，如何实现？

7. 开源库里会有一些类似下面这种奇怪的用法：var _ io.Writer = (*myWriter)(nil)，是为什么？

8. Go的对象在内存中是怎样分配的？

### 技术原理篇

1. Etcd怎么实现分布式锁? Etcd的Raft一致性算法原理?

2. 滑动窗口的概念以及应用?

3. 怎么做弹性扩缩容，原理是什么?

4. grpc内部原理是什么？

5. http2的特点是什么，与http1.1的对比

6. TCP 的 CLOSE_WAIT 状态是什么?

7. 让你设计一个web框架，你要怎么设计，说一下步骤

### 操作系统篇

1. iptables是什么？有几个阶段?

2. 什么是ipvs, 和iptables有什么区别？
 
3. 孤儿进程，僵尸进程

4. 什么是内存对齐


## 算法

1. 如何判断两个无环单链表有没有交叉点?

2. 如何判断一个单链表有没有环, 并找出入环点?

3. 手写一个快速排序

4. golang 两个协成交替打印1-100的奇数偶数

5. 如何判断一棵二叉树是对称的？


## 必看面试题

### 猜输出

https://www.jishuchi.com/read/go-interview/3436

https://www.zhihu.com/question/60952598/answer/1781656095

https://blog.csdn.net/itcastcpp/article/details/80462619

### 算法篇

https://github.com/lifei6671/interview-go